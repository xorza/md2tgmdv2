rust code:

```rust
function chunk\_messages\(messages, max\_chunk\_tokens\):
    chunks \= \[\]
    current\_chunk \= \[\]
    current\_tokens \= 0

    for msg in messages:
        text \= msg\.role \+ ": " \+ msg\.content
        t \= token\_count\(text\)
```
=========
```rust
    if current\_chunk not empty:
        chunks\.append\(current\_chunk\)

return chunks

```

Notes:

⦁ You always cut at *message boundaries*\.
⦁ `summarize\_single\_long\_message\_with\_llm` is just a one‑off “summarize this text” call\.
