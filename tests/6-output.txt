>\[BEGIN SEGMENT\]  
><insert this chunkâ€™s messages, each prefixed with â€œuser:â€ or â€œassistant:â€\>  
>\[END SEGMENT\]

Codeâ€‘ish:

```pseudo
chunk\_summaries \= \[\]

for i, chunk in enumerate\(chunks\):
    prompt \= build\_chunk\_summary\_prompt\(chunk\)  \# uses text above
    summary\_text \= call\_llm\(prompt\)
    chunk\_summaries\.append\(\{
        "chunk\_index": i,
        "summary": summary\_text
    \}\)
```

Now the entire long conversation is represented by, say, 50â€“200 chunk summaries\.

â€”â€”â€”â€”â€”â€”â€”â€”

*ðŸ“š 3\.3\. Step 3 â€“ Summarize the Summaries \(Hierarchy\)*

If all `chunk\_summaries` together are still too big for your use case, compress them again\.

*ðŸ”– 3\.3\.1\. Group summaries*
